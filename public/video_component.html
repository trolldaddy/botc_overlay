<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>BOTC 互動元件</title>
  <script src="https://extension-files.twitch.tv/helper/v1/twitch-ext.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      font-size: 2em;
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <div id="roleInfo">載入中...</div>

  <script>
    const customList = {
      "鎮民": ["占卜師", "士兵", "洗衣婦"],
      "外來者": ["酒鬼", "聖女"],
      "爪牙": ["間諜", "毒師"],
      "惡魔": ["夢魘"]
    };

    function getRandomRole() {
      const categories = Object.keys(customList);
      const randomCategory = categories[Math.floor(Math.random() * categories.length)];
      const roles = customList[randomCategory];
      const randomRole = roles[Math.floor(Math.random() * roles.length)];
      return { category: randomCategory, role: randomRole };
    }

    const roleData = getRandomRole();
    const roleInfoDiv = document.getElementById('roleInfo');
    roleInfoDiv.textContent = `陣營：${roleData.category} - 角色：${roleData.role}`;

    // 確保 Extension Helper 正常載入
    if (window.Twitch && window.Twitch.ext) {
      window.Twitch.ext.onAuthorized((auth) => {
        console.log('Extension Authorized', auth);
      });
      window.Twitch.ext.onContext((context) => {
        console.log('Context Updated', context);
      });
    } else {
      console.error('Twitch Extension Helper 未載入');
    }
  </script>
</body>
</html>
